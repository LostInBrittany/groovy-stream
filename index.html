<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>groovy-stream by timyates</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <a href="https://github.com/timyates/groovy-stream">
      <img style="position: absolute; top: 0; right: 0; border: 0; padding: 0; margin: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"/>
    </a>
    <div class="wrapper">
      <header>
        <h1 class="header">groovy-stream</h1>
        <p class="header">A collection of classes to give a fluent builder for Streams (Lazy Groovy Generators)</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/timyates/groovy-stream/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/timyates/groovy-stream/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/timyates/groovy-stream">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/timyates">timyates</a></p>


      </header>
      <section>
        <h1>A Lazy Groovy Generator.</h1>

<ul>
<li>Scroll down to see what's new.</li>
</ul><h2>What is this?</h2>

<p><code>groovy-stream</code> is a collection of classes which allow you to create a lazy-generator in Groovy.</p>

<p>You can declare the input from which the Stream will generate its values, and then declare a filter and mapping transformation for each element returned if required.</p>

<p>To see examples, have a look in the <a href="https://github.com/timyates/groovy-stream/tree/master/src/test/groovy/groovy/stream"><code>src/test/groovy/groovy/stream</code> folder</a>, but in a nutshell, this class lets you do stuff like:</p>

<div class="highlight">
<pre><span class="n">Stream</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Stream</span><span class="o">.</span><span class="na">from</span> <span class="nl">x:</span><span class="mi">1</span><span class="o">..</span><span class="mi">2</span><span class="o">,</span> <span class="nl">y:</span><span class="mi">1</span><span class="o">..</span><span class="mi">4</span> <span class="n">filter</span> <span class="o">{</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">}</span>

<span class="k">assert</span> <span class="n">s</span><span class="o">.</span><span class="na">collect</span><span class="o">()</span> <span class="o">==</span> <span class="o">[</span> <span class="o">[</span> <span class="nl">x:</span><span class="mi">1</span><span class="o">,</span> <span class="nl">y:</span><span class="mi">3</span> <span class="o">],</span> <span class="o">[</span> <span class="nl">x:</span><span class="mi">2</span><span class="o">,</span> <span class="nl">y:</span><span class="mi">2</span> <span class="o">]</span> <span class="o">]</span>
</pre>
</div>


<p>or</p>

<div class="highlight">
<pre><span class="n">Stream</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Stream</span><span class="o">.</span><span class="na">from</span> <span class="mi">1</span><span class="o">..</span><span class="mi">10</span> <span class="n">map</span> <span class="o">{</span> <span class="n">it</span> <span class="o">+</span> <span class="n">x</span><span class="o">++</span> <span class="o">}</span> <span class="n">filter</span> <span class="o">{</span> <span class="n">it</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">}</span> <span class="n">using</span> <span class="nl">x:</span><span class="mi">0</span>

<span class="k">assert</span> <span class="n">s</span><span class="o">.</span><span class="na">collect</span><span class="o">()</span> <span class="o">==</span> <span class="o">[</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">13</span> <span class="o">]</span>
</pre>
</div>


<div class="highlight">
<pre><span class="c1">// Odd example but showing all of the features</span>

<span class="n">Stream</span><span class="o">.</span><span class="na">from</span> <span class="o">{</span> <span class="mi">1</span><span class="o">..</span><span class="na">max</span> <span class="o">}</span> <span class="n">map</span> <span class="o">{</span> <span class="o">-</span><span class="n">it</span> <span class="o">}</span> <span class="n">filter</span> <span class="o">{</span> <span class="n">it</span> <span class="o">&gt;=</span> <span class="n">min</span> <span class="o">}</span> <span class="n">using</span> <span class="nl">min:</span><span class="mi">3</span><span class="o">,</span> <span class="nl">max:</span><span class="mi">5</span>

<span class="k">assert</span> <span class="n">s</span><span class="o">.</span><span class="na">collect</span><span class="o">()</span> <span class="o">==</span> <span class="o">[</span> <span class="o">-</span><span class="mi">3</span><span class="o">,</span> <span class="o">-</span><span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">5</span> <span class="o">]</span>
</pre>
</div>


<p>There is a <a href="http://blog.bloidonia.com/post/22117894718/groovy-stream-a-lazy-generator-and-list-comprehension">blog post here</a> explaining the state of groovy-stream v0.1 and it's usage</p>

<hr><h2>What's new</h2>

<h3>v0.5.1</h3>

<p>Fixed <a href="https://github.com/timyates/groovy-stream/issues/7">a bug</a> whereby Streams couldn't iterate another Stream.</p>

<h3>v0.5</h3>

<p>The functions <span class="n">where</span> and <span class="n">transform</span> have been renamed to <span class="n">filter</span> and <span class="n">map</span> respectively.</p>

<p>It's better to use existing, known function names for existing functionality rather than inventing your own terms.</p>

<h3>v0.4</h3>

<p>You can now use arrays as a source for groovy-streams.  Previously, running:</p>

<div class="highlight">
<pre><span class="kt">int</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="o">[</span> <span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span> <span class="o">]</span>
<span class="n">Stream</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Stream</span><span class="o">.</span><span class="na">from</span> <span class="n">arr</span>
<span class="n">s</span><span class="o">.</span><span class="na">each</span> <span class="o">{</span> <span class="n">println</span> <span class="n">it</span> <span class="o">}</span>
</pre>
</div>


<p>Would be an infinite loop, returning <code>[1,2,3]</code> every time.</p>

<p>This will now behave as expected.</p>

<h3>v0.3</h3>

<p>groovy-stream can now be used as a Module Extension with Groovy 2.0</p>

<p>This means you can do:</p>

<div class="highlight">
<pre><span class="n">Stream</span> <span class="n">s</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">].</span><span class="na">toStream</span><span class="o">()</span>
</pre>
</div>


<p>Just by including the built jar on your classpath. It works with <code>@Grab</code> too:</p>

<div class="highlight">
<pre><span class="nd">@GrabResolver</span><span class="o">(</span> <span class="n">name</span><span class="o">=</span><span class="s1">'bloidonia'</span><span class="o">,</span> <span class="n">root</span><span class="o">=</span><span class="s1">'https://raw.github.com/timyates/bloidonia-repo/master'</span> <span class="o">)</span>
<span class="nd">@Grab</span><span class="o">(</span><span class="s1">'com.bloidonia:groovy-stream:0.3'</span><span class="o">)</span>
<span class="kn">import</span> <span class="nn">groovy.stream.Stream</span> 

<span class="kt">def</span> <span class="n">s</span> <span class="o">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">4</span><span class="o">).</span><span class="na">toStream</span><span class="o">()</span>
<span class="k">assert</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">]</span> <span class="o">==</span> <span class="n">s</span><span class="o">.</span><span class="na">collect</span><span class="o">()</span>
</pre>
</div>


<p>See <a href="https://github.com/timyates/groovy-stream/blob/master/src/main/groovy/groovy/stream/StreamExtension.java">groovy.stream.StreamExtension</a> for the decorated classes.</p>

<blockquote>
<p>Currently (as of Groovy 2.0RC4) there are issues with using <code>@Grab</code> -- (see <a href="https://jira.codehaus.org/browse/GROOVY-5543">GROOVY-5543</a> but this should work fine where the jar is added to the classpath by hand.</p>
</blockquote>

<h3>v0.2</h3>

<p>When Streaming over a Map, it is now passed as a parameter to the <code>where</code> block so you can deal with shadowed variables, ie:</p>

<div class="highlight">
<pre><span class="kt">def</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>

<span class="kt">def</span> <span class="n">bad</span> <span class="o">=</span> <span class="n">Stream</span><span class="o">.</span><span class="na">from</span> <span class="nl">x:</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="o">,</span> <span class="nl">y:</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span> <span class="n">where</span> <span class="o">{</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span> <span class="o">}</span>
<span class="k">assert</span> <span class="n">bad</span><span class="o">.</span><span class="na">collect</span><span class="o">()</span> <span class="o">==</span> <span class="o">[]</span> <span class="c1">// as 'x' in the where block == 10</span>

<span class="kt">def</span> <span class="n">good</span> <span class="o">=</span> <span class="n">Stream</span><span class="o">.</span><span class="na">from</span> <span class="nl">x:</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="o">,</span> <span class="nl">y:</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span> <span class="n">where</span> <span class="o">{</span> <span class="n">it</span><span class="o">.</span><span class="na">x</span> <span class="o">==</span> <span class="n">it</span><span class="o">.</span><span class="na">y</span> <span class="o">}</span>
<span class="k">assert</span> <span class="n">good</span><span class="o">.</span><span class="na">collect</span><span class="o">()</span> <span class="o">==</span> <span class="o">[</span> <span class="o">[</span><span class="nl">x:</span><span class="mi">1</span><span class="o">,</span><span class="nl">y:</span><span class="mi">1</span><span class="o">],[</span><span class="nl">x:</span><span class="mi">2</span><span class="o">,</span><span class="nl">y:</span><span class="mi">2</span><span class="o">],[</span><span class="nl">x:</span><span class="mi">3</span><span class="o">,</span><span class="nl">y:</span><span class="mi">3</span><span class="o">]</span> <span class="o">]</span>
</pre>
</div>


<h3>v0.1</h3>

<p>Initial release.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-32866444-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>